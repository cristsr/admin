<div class="flex flex-col p-4">
  <div class="flex pb-4 items-center justify-between">
    <div class="flex items-center gap-2">
      <mat-icon class="material-icons-outlined"
        >account_balance_wallet</mat-icon
      >
      <div class="text-xl font-medium">{{ tittle[action] }}</div>
    </div>

    <button
      class="flex justify-center items-center w-8 h-8 rounded-full border-solid border border-black"
      mat-ripple
      *ngIf="action === 'read'"
      (click)="editBudget()"
    >
      <mat-icon>edit</mat-icon>
    </button>
  </div>

  <form
    class="flex flex-col w-full gap-2"
    [formGroup]="form"
    (submit)="onSubmit()"
  >
    <mat-form-field [appearance]="appearance" floatLabel="auto">
      <mat-label>Categoría</mat-label>
      <mat-icon matPrefix class="text-purple-600 mr-2">category</mat-icon>
      <mat-select formControlName="category" [compareWith]="compare">
        <mat-select-trigger>
          {{
            form.get('category').value?.name ?? 'Seleccione una categoría'
              | titlecase
          }}
        </mat-select-trigger>
        <mat-option *ngFor="let item of categories" [value]="item">
          <mat-icon matPrefix class="text-{{ item.color }}">{{
            item.icon
          }}</mat-icon>
          {{ item.name | titlecase }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field [appearance]="appearance" floatLabel="auto">
      <mat-icon matPrefix class="text-purple-600 mr-2">
        drive_file_rename_outline
      </mat-icon>
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="name" autocomplete="off" />
    </mat-form-field>

    <mat-form-field [appearance]="appearance" floatLabel="auto">
      <mat-icon matPrefix class="text-purple-600 mr-2">attach_money</mat-icon>
      <mat-label>Total</mat-label>
      <input
        matInput
        type="number"
        formControlName="amount"
        autocomplete="off"
      />
    </mat-form-field>

    <mat-slide-toggle
      color="primary"
      class="example-margin"
      formControlName="repeat"
    >
      Repetir
    </mat-slide-toggle>

    <button
      class="mt-2 w-full bg-purple-500 p-3 rounded-xl flex justify-center items-center text-white"
      mat-ripple
      *ngIf="action !== 'read'"
    >
      <mat-icon matPrefix class="mr-2">save</mat-icon>
      <span class="mt-0.5 font-bold">Guardar</span>
    </button>
  </form>
</div>
